#include <iostream>
#include<Windows.h>
#include<time.h>
#include<conio.h>
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
using namespace std;
bool gameOver;
const int width = 60, hight = 30;//змінні для ігрового поля
int x, y, score;
enum eDirection { STOP = 0, LEFT, RIGHT, UP, DOWN, EXITT };
eDirection dir;
char arr[hight][width] = {};
bool exit_t = false;

int coin_1_x = 4;
int coin_1_y = 7;
bool coin_1 = true;

int coin_2_x = 56;
int coin_2_y = 3;
bool coin_2 = true;



int coin_3_x = 8;
int coin_3_y = 24;
bool coin_3 = true;

int coin_4_x = 50;
int coin_4_y = 27;
bool coin_4 = true;

int exit_1_y = 29;
int exit_1_x = 57;

int exit_2_y = 29;
int exit_2_x = 58;

int exit_3_y = 29;
int exit_3_x = 56;

int exit_4_y = 29;
int exit_4_x = 55;

void Setup() {
    gameOver = false;
    x = 1;
    y = 1;
    score = 0;

    coin_1 = true;

}
void Draw() {
    for (int i = 0; i < hight; i++) {
        for (int j = 0; j < width; j++) {
            if (i == 3 && j == 1 ||
                i == 3 && j == 2 ||
                i == 3 && j == 3 ||
                i == 3 && j == 4 ||
                i == 3 && j == 5 ||
                i == 3 && j == 6 ||
                i == 3 && j == 7 ||
                i == 3 && j == 8 ||
                i == 3 && j == 9 ||
                i == 3 && j == 10 ||
                i == 3 && j == 11 ||
                i == 3 && j == 12 ||
                i == 3 && j == 13 ||
                i == 3 && j == 14 ||
                i == 3 && j == 15 ||
                i == 3 && j == 16 ||

                i == 5 && j == 1 ||
                i == 5 && j == 2 ||
                i == 5 && j == 3 ||
                i == 5 && j == 4 ||
                i == 5 && j == 5 ||
                i == 5 && j == 6 ||
                i == 5 && j == 7 ||
                i == 5 && j == 8 ||
                i == 5 && j == 9 ||


                i == 6 && j == 9 ||
                i == 7 && j == 9 ||
                i == 8 && j == 9 ||

                i == 8 && j == 9 ||
                i == 8 && j == 10 ||
                i == 8 && j == 11 ||
                i == 8 && j == 12 ||
                i == 8 && j == 13 ||
                i == 8 && j == 14 ||
                i == 8 && j == 15 ||
                i == 8 && j == 16 ||
                i == 8 && j == 17 ||
                i == 8 && j == 18 ||
                i == 8 && j == 19 ||
                i == 8 && j == 20 ||
                i == 8 && j == 21 ||



                i == 1 && j == 21 ||
                i == 2 && j == 21 ||
                i == 3 && j == 21 ||
                i == 4 && j == 21 ||
                i == 5 && j == 21 ||
                i == 6 && j == 21 ||

                i == 1 && j == 30 ||
                i == 2 && j == 30 ||
                i == 3 && j == 30 ||
                i == 4 && j == 30 ||
                i == 5 && j == 30 ||
                i == 6 && j == 30 ||


                i == 6 && j == 22 ||
                i == 6 && j == 23 ||
                i == 6 && j == 24 ||
                i == 6 && j == 25 ||
                i == 6 && j == 26 ||
                i == 6 && j == 27 ||
                i == 6 && j == 28 ||
                i == 6 && j == 29 ||

                i == 7 && j == 26 ||
                i == 8 && j == 26 ||
                i == 9 && j == 26 ||
                i == 10 && j == 26 ||
                i == 11 && j == 26 ||
                i == 12 && j == 26 ||
                i == 13 && j == 26 ||


                i == 4 && j == 16 ||
                i == 5 && j == 16 ||
                i == 6 && j == 16 ||
                i == 7 && j == 16 ||

                i == 13 && j == 26 ||
                i == 13 && j == 27 ||
                i == 13 && j == 28 ||
                i == 13 && j == 29 ||
                i == 13 && j == 30 ||


                i == 11 && j == 30 ||
                i == 12 && j == 30 ||


                i == 11 && j == 31 ||
                i == 11 && j == 32 ||
                i == 11 && j == 33 ||
                i == 11 && j == 34 ||
                i == 11 && j == 35 ||
                i == 11 && j == 36 ||
                i == 11 && j == 37 ||
                i == 11 && j == 38 ||
                i == 11 && j == 39 ||
                i == 11 && j == 40 ||
                i == 11 && j == 41 ||
                i == 11 && j == 42 ||
                i == 11 && j == 43 ||
                i == 11 && j == 44 ||
                i == 11 && j == 45 ||
                i == 11 && j == 46 ||

                i == 9 && j == 46 ||
                i == 10 && j == 46 ||

                i == 9 && j == 45 ||
                i == 9 && j == 44 ||
                i == 9 && j == 43 ||
                i == 9 && j == 42 ||

                i == 4 && j == 42 ||
                i == 5 && j == 42 ||
                i == 6 && j == 42 ||
                i == 7 && j == 42 ||
                i == 8 && j == 42 ||

                i == 4 && j == 38 ||
                i == 4 && j == 39 ||
                i == 4 && j == 40 ||
                i == 4 && j == 41 ||


                i == 1 && j == 38 ||
                i == 2 && j == 38 ||
                i == 3 && j == 38 ||

                i == 1 && j == 51 ||
                i == 2 && j == 51 ||
                i == 3 && j == 51 ||

                i == 1 && j == 47 ||
                i == 2 && j == 47 ||
                i == 3 && j == 47 ||

                i == 3 && j == 48 ||

                i == 3 && j == 52 ||

                i == 4 && j == 48 ||
                i == 5 && j == 48 ||
                i == 6 && j == 48 ||


                i == 4 && j == 52 ||
                i == 5 && j == 52 ||
                i == 6 && j == 52 ||

                i == 6 && j == 49 ||
                i == 6 && j == 50 ||

                i == 6 && j == 53 ||
                i == 6 && j == 54 ||

                i == 7 && j == 54 ||
                i == 8 && j == 54 ||
                i == 9 && j == 54 ||
                i == 10 && j == 54 ||
                i == 11 && j == 54 ||
                i == 12 && j == 54 ||

                i == 7 && j == 50 ||
                i == 8 && j == 50 ||
                i == 9 && j == 50 ||
                i == 10 && j == 50 ||
                i == 11 && j == 50 ||
                i == 12 && j == 50 ||

                i == 12 && j == 51 ||
                i == 12 && j == 52 ||
                i == 12 && j == 53 ||




                i == 11 && j == 1 ||
                i == 11 && j == 2 ||
                i == 11 && j == 3 ||
                i == 11 && j == 4 ||
                i == 11 && j == 5 ||
                i == 11 && j == 6 ||
                i == 11 && j == 7 ||
                i == 11 && j == 8 ||
                i == 11 && j == 9 ||
                i == 11 && j == 10 ||
                i == 11 && j == 11 ||
                i == 11 && j == 12 ||
                i == 11 && j == 13 ||
                i == 11 && j == 14 ||
                i == 11 && j == 15 ||
                i == 11 && j == 16 ||
                i == 11 && j == 17 ||
                i == 11 && j == 18 ||
                i == 11 && j == 19 ||
                i == 11 && j == 20 ||
                i == 11 && j == 21 ||

                i == 12 && j == 21 ||
                i == 13 && j == 21 ||
                i == 14 && j == 21 ||
                i == 15 && j == 21 ||
                i == 16 && j == 21 ||
                i == 17 && j == 21 ||


                i == 16 && j == 12 ||
                i == 16 && j == 13 ||
                i == 16 && j == 14 ||
                i == 16 && j == 15 ||
                i == 16 && j == 16 ||
                i == 16 && j == 17 ||
                i == 16 && j == 18 ||
                i == 16 && j == 19 ||
                i == 16 && j == 20 ||

                i == 14 && j == 12 ||
                i == 15 && j == 12 ||

                i == 14 && j == 11 ||
                i == 14 && j == 10 ||
                i == 14 && j == 9 ||
                i == 14 && j == 8 ||
                i == 14 && j == 7 ||
                i == 14 && j == 6 ||
                i == 14 && j == 5 ||

                i == 14 && j == 5 ||
                i == 15 && j == 5 ||
                i == 16 && j == 5 ||
                i == 17 && j == 5 ||
                i == 18 && j == 5 ||
                i == 19 && j == 5 ||
                i == 20 && j == 5 ||
                i == 21 && j == 5 ||
                i == 22 && j == 5 ||
                i == 23 && j == 5 ||

                i == 23 && j == 6 ||
                i == 23 && j == 7 ||
                i == 23 && j == 8 ||
                i == 23 && j == 9 ||
                i == 23 && j == 10 ||
                i == 23 && j == 11 ||
                i == 23 && j == 12 ||

                i == 24 && j == 12 ||
                i == 25 && j == 12 ||
                i == 26 && j == 12 ||

                i == 26 && j == 12 ||
                i == 26 && j == 11 ||
                i == 26 && j == 10 ||
                i == 26 && j == 9 ||
                i == 26 && j == 8 ||
                i == 26 && j == 7 ||
                i == 26 && j == 6 ||
                i == 26 && j == 5 ||





                i == 15 && j == 22 ||
                i == 15 && j == 23 ||
                i == 15 && j == 24 ||
                i == 15 && j == 25 ||
                i == 15 && j == 26 ||
                i == 15 && j == 27 ||

                i == 16 && j == 27 ||
                i == 17 && j == 27 ||
                i == 18 && j == 27 ||
                i == 19 && j == 27 ||
                i == 20 && j == 27 ||
                i == 21 && j == 27 ||



                i == 27 && j == 35 ||
                i == 28 && j == 35 ||
                i == 30 && j == 35 ||

                i == 27 && j == 34 ||
                i == 27 && j == 33 ||
                i == 27 && j == 32 ||
                i == 27 && j == 31 ||
                i == 27 && j == 30 ||
                i == 27 && j == 29 ||
                i == 27 && j == 28 ||
                i == 27 && j == 27 ||
                i == 27 && j == 26 ||
                i == 27 && j == 25 ||
                i == 27 && j == 24 ||
                i == 27 && j == 23 ||
                i == 27 && j == 22 ||

                i == 25 && j == 22 ||
                i == 26 && j == 22 ||

                i == 25 && j == 23 ||
                i == 25 && j == 24 ||
                i == 25 && j == 25 ||
                i == 25 && j == 26 ||
                i == 25 && j == 27 ||
                i == 25 && j == 28 ||

                i == 23 && j == 28 ||
                i == 24 && j == 28 ||

                i == 23 && j == 28 ||
                i == 23 && j == 27 ||
                i == 23 && j == 26 ||
                i == 23 && j == 25 ||
                i == 23 && j == 24 ||
                i == 23 && j == 23 ||
                i == 23 && j == 22 ||
                i == 23 && j == 21 ||
                i == 23 && j == 20 ||

                i == 23 && j == 20 ||
                i == 22 && j == 20 ||
                i == 21 && j == 20 ||
                i == 20 && j == 20 ||

                i == 20 && j == 20 ||
                i == 20 && j == 19 ||
                i == 20 && j == 18 ||
                i == 20 && j == 17 ||
                i == 20 && j == 16 ||


                i == 19 && j == 16 ||
                i == 18 && j == 16 ||

                i == 28 && j == 54 ||
                i == 27 && j == 54 ||
                i == 26 && j == 54 ||
                i == 25 && j == 54 ||
                i == 29 && j == 54 ||


                i == 25 && j == 54 ||
                i == 25 && j == 53 ||
                i == 25 && j == 52 ||
                i == 25 && j == 51 ||
                i == 25 && j == 50 ||
                i == 25 && j == 49 ||
                i == 25 && j == 48 ||
                i == 25 && j == 47 ||
                i == 25 && j == 46 ||
                i == 25 && j == 46 ||
                i == 25 && j == 45 ||
                i == 25 && j == 44 ||

                i == 26 && j == 44 ||
                i == 27 && j == 44 ||

                i == 27 && j == 44 ||
                i == 27 && j == 43 ||
                i == 27 && j == 42 ||
                i == 27 && j == 41 ||
                i == 27 && j == 40 ||
                i == 27 && j == 39 ||

                i == 27 && j == 39 ||
                i == 26 && j == 39 ||
                i == 25 && j == 39 ||
                i == 24 && j == 39 ||
                i == 23 && j == 39 ||

                i == 23 && j == 39 ||
                i == 23 && j == 38 ||
                i == 23 && j == 37 ||
                i == 23 && j == 36 ||
                i == 23 && j == 35 ||

                i == 23 && j == 35 ||
                i == 22 && j == 35 ||
                i == 21 && j == 35 ||
                i == 20 && j == 35 ||
                i == 19 && j == 35 ||


                i == 19 && j == 35 ||
                i == 19 && j == 36 ||
                i == 19 && j == 37 ||
                i == 19 && j == 38 ||
                i == 19 && j == 39 ||
                i == 19 && j == 40 ||
                i == 19 && j == 41 ||
                i == 19 && j == 42 ||
                i == 19 && j == 43 ||
                i == 19 && j == 44 ||
                i == 19 && j == 45 ||
                i == 19 && j == 46 ||
                i == 19 && j == 47 ||
                i == 19 && j == 48 ||
                i == 19 && j == 49 ||
                i == 19 && j == 50 ||

                i == 18 && j == 50 ||
                i == 17 && j == 50 ||
                i == 16 && j == 50 ||

                i == 16 && j == 50 ||
                i == 16 && j == 49 ||
                i == 16 && j == 48 ||
                i == 16 && j == 47 ||

                i == 16 && j == 47 ||
                i == 15 && j == 47 ||
                i == 14 && j == 47 ||


                i == 14 && j == 46 ||
                i == 14 && j == 45 ||
                i == 14 && j == 44 ||
                i == 14 && j == 43 ||
                i == 14 && j == 42 ||
                i == 14 && j == 41 ||
                i == 14 && j == 40 ||
                i == 14 && j == 39 ||

                i == 15 && j == 39 ||
                i == 16 && j == 39 ||
                i == 14 && j == 39 ||
                i == 0 || j == 0 || i == hight - 1 || j == width - 1















                ) {
                arr[i][j] = '#';
                if (score > 2) {
                    arr[exit_1_y][exit_1_x] = '_';
                    arr[exit_2_y][exit_2_x] = '_';
                    arr[exit_3_y][exit_3_x] = '_';
                    arr[exit_4_y][exit_4_x] = '_';


                }
                if (x == j && y == i) {
                    gameOver = true;

                }
            }
            else if (i == 0 || j == 0 || i == hight - 1 || j == width - 1) {
                arr[i][j] = '#';
            }

            else if (j == coin_1_x && i == coin_1_y && coin_1 == true) {
                arr[i][j] = '@';
                if (x == coin_1_x && y == coin_1_y) {
                    score += 1;
                    coin_1 = false;
                }
            }
            else if (j == coin_2_x && i == coin_2_y && coin_2 == true) {
                arr[i][j] = '@';
                if (x == coin_2_x && y == coin_2_y) {
                    score += 1;
                    coin_2 = false;
                }
            }
            else if (j == coin_3_x && i == coin_3_y && coin_3 == true) {
                arr[i][j] = '@';
                if (x == coin_3_x && y == coin_3_y) {
                    score += 1;
                    coin_3 = false;
                }
            }
            else if (j == coin_4_x && i == coin_4_y && coin_4 == true) {
                arr[i][j] = '@';
                if (x == coin_4_x && y == coin_4_y) {
                    score += 1;
                    coin_4 = false;
                }
            }

            else if (i == y && j == x)
                arr[i][j] = '0';




            else {
                arr[i][j] = ' ';
            }

        }
    }

    system("cls");
    for (size_t i = 0; i < hight; i++)
    {
        for (size_t j = 0; j < width; j++)
        {
            cout << arr[i][j];
        }
        cout << endl;
    }
    cout << endl << "Score= " << score << endl;
    Sleep(200);
}

void Input() {
    if (_kbhit()) {
        switch (_getch()) {
        case 'w':dir = UP; break;
        case 'd':dir = RIGHT; break;
        case 'a':dir = LEFT; break;
        case 's':dir = DOWN; break;
        case 'q':dir = EXITT; break;
        case 32:dir = STOP; break;
        }
    }
}
void Logik() {
    switch (dir) {
    case LEFT:x--; break;
    case RIGHT:x++; break;
    case UP:y--; break;
    case DOWN:y++; break;
    case EXITT: gameOver = true; exit_t = true;
    }

}
int main() {
    while (!exit_t) {
        Setup();
        while (!gameOver) {
            if (x == exit_1_x && y == exit_1_y) {
                gameOver = true;
                exit_t = true;

            }
            if (x == exit_2_x && y == exit_2_y) {
                gameOver = true;
                exit_t = true;

            }
            if (x == exit_3_x && y == exit_3_y) {
                gameOver = true;
                exit_t = true;

            }
            if (x == exit_4_x && y == exit_4_y) {
                gameOver = true;
                exit_t = true;

            }
            Draw();
            Input();
            Logik();
        }
    }
    return 0;
}